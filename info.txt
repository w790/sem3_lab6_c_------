1.
–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–µ MVC, —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞: –ú–æ–¥–µ–ª—å (Model), –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (View) –∏ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Controller). –ú–æ–¥–µ–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, —Ü–≤–µ—Ç–∞–º–∏, —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ —Ñ–∏–≥—É—Ä –∏ –∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ, –æ—Ç–æ–±—Ä–∞–∂–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–ª–∏–∫–∏ –º—ã—à–∏, –¥–≤–∏–∂–µ–Ω–∏—è), –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö –ú–æ–¥–µ–ª–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

–ú–æ–¥–µ–ª—å (Model):
–°–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–∞—Ö (–∫—Ä—É–≥, –∫–≤–∞–¥—Ä–∞—Ç, –ª–∏–Ω–∏—è), –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞—Ö (—Ü–≤–µ—Ç, —Ç–æ–ª—â–∏–Ω–∞ –ª–∏–Ω–∏–∏, –ø–æ–∑–∏—Ü–∏—è, —Ä–∞–∑–º–µ—Ä) –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—è—Ö.
–†–µ–∞–ª–∏–∑—É–µ—Ç –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∞–≤–∏–ª–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –æ–±—ä–µ–∫—Ç–æ–≤, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ —Ç.–¥..
–ù–µ –∑–Ω–∞–µ—Ç –Ω–∏—á–µ–≥–æ –æ —Ç–æ–º, –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è, –∏ –Ω–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (View):
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫—É –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –ú–æ–¥–µ–ª—å—é.
–í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ API –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Canvas API –∏–ª–∏ SVG).
–Ø–≤–ª—è–µ—Ç—Å—è "—Å–ª–æ–µ–º" –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é.

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Controller):
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –∫–ª–∏–∫–∏ –º—ã—à—å—é, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ, –≤–≤–æ–¥ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ —Ç.–¥..
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ú–æ–¥–µ–ª—å—é, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥–≤–∏–Ω—É—Ç—å —Ñ–∏–≥—É—Ä—É, –∏–∑–º–µ–Ω–∏—Ç—å –µ—ë —Ä–∞–∑–º–µ—Ä).
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ú–æ–¥–µ–ª—å.





2.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí Controller ‚Üí Model ‚Üí Controller ‚Üí View ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
     ‚Üì              ‚Üì          ‚Üì          ‚Üì        ‚Üì        ‚Üì
   –ù–∞–∂–∞–ª     –û–±—Ä–∞–±–æ—Ç–∞–ª    –ò–∑–º–µ–Ω–∏–ª    –û–±–Ω–æ–≤–∏–ª  –û—Ç—Ä–∏—Å–æ–≤–∞–ª –£–≤–∏–¥–µ–ª
   –∫–Ω–æ–ø–∫—É    –∫–æ–º–∞–Ω–¥—É      –¥–∞–Ω–Ω—ã–µ     View     —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –∫—Ä—É–≥":

–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –∫—Ä—É–≥"
Controller –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º GUI) –∏–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é (–≤ –Ω–∞—à–µ–º –º–∞–∫–µ—Ç–µ)
Controller —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç Circle
Controller –≤—ã–∑—ã–≤–∞–µ—Ç model->addPrimitive(circle)
Model –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∏–º–∏—Ç–∏–≤ –≤ —Å–≤–æ–π –≤–µ–∫—Ç–æ—Ä
Controller –≤—ã–∑—ã–≤–∞–µ—Ç view->render()
View –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É Model –≤—Å–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã
View –≤—ã–∑—ã–≤–∞–µ—Ç primitive->draw() –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–º–∏—Ç–∏–≤–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ø—Ä–æ–≥–æ–≤–æ—Ä–∏–º ExportImport —Å–µ—Ä–≤–∏—Å –∫–∞–∫–∞—è –ª–æ–≥–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–ª–æ–∂–µ–Ω–∞ –≤ –Ω–µ–≥–æ —è –¥—É–º–∞—é –Ω–∞–¥–æ —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å
ExportImport
–≤ –Ω–∞—á–∞–ª–µ –∏–º–ø–æ—Ä—Ç–Ω–µ–º modeldocument —Ç–∞–∫ –∫–∞–∫ –Ω–∞–º –Ω—É–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –≤ —Ñ–∞–π–ª –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö(–≤–µ–∫—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ Primitive)
–æ–∫–µ–π —Ä–µ–∞–ª–∏–∑—É–µ–º —Ç–∞–º –º–µ—Ç–æ–¥ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è .





3.
–≤–∞–∂–Ω–æ:

–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥
–ë–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –û–±—ä—è–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —Ç–µ–ª–∞ –º–µ—Ç–æ–¥–∞, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –µ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–º –∫–ª–∞—Å—Å–µ.
–®–∞–±–ª–æ–Ω: –°–ª—É–∂–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º ‚Äî –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –∫–ª–∞—Å—Å—ã –æ–±—è–∑–∞–Ω—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.
–í –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º –∫–ª–∞—Å—Å–µ: –ú–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º –∫–ª–∞—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –Ω–µ–ª—å–∑—è –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞—Ç—å.

–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
–° —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –ò–º–µ–µ—Ç —Ç–µ–ª–æ –º–µ—Ç–æ–¥–∞ –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –±–∞–∑–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∫–ª–∞—Å—Å—ã –º–æ–≥—É—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.
–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º: –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–µ—Ç–æ–¥–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–º —Ç–∏–ø–µ –æ–±—ä–µ–∫—Ç–∞, –∞ –Ω–µ —Ç–∏–ø–µ —Å—Å—ã–ª–∫–∏.

–ó–ê–ü–û–ú–ù–ò:
–ß–∏—Å—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ (Pure Virtual Method) = –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –º–µ—Ç–æ–¥
cpp
class Animal {
public:
    virtual void speak() = 0;  // —á–∏—Å—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
};






4.
–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º: –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–µ—Ç–æ–¥–∞ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å:

cpp
Primitive* shapes[] = {new Circle(1,2,3), new Rectangle(4,5,6,7)};
shapes[0]->draw();  // –í—ã–∑–æ–≤–µ—Ç Circle::draw()
shapes[1]->draw();  // –í—ã–∑–æ–≤–µ—Ç Rectangle::draw()
–ë–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏:

cpp
shapes[0]->draw();  // –í—Å–µ–≥–¥–∞ –≤—ã–∑–æ–≤–µ—Ç Primitive::draw() (–µ—Å–ª–∏ –±—ã –æ–Ω –±—ã–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)
–ß–∏—Å—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (= 0) –¥–µ–ª–∞–µ—Ç –∫–ª–∞—Å—Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º






5.
–î–æ–±–∞–≤–ª–µ–Ω–æ override:

cpp
void draw() override;  // –≤ –æ–±—ä—è–≤–ª–µ–Ω–∏—è—Ö
–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º: override –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞
–ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–µ—á–∞—Ç–æ–∫: –ï—Å–ª–∏ –≤—ã –æ–ø–µ—á–∞—Ç–∞–µ—Ç–µ—Å—å –≤ –∏–º–µ–Ω–∏ –∏–ª–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–µ, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É
–£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏: –Ø—Å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é





6.
–ó–∞—á–µ–º –≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º –∫–ª–∞—Å—Å–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä, –µ—Å–ª–∏ –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç?

cpp
class Primitive {
public:
    virtual void draw() = 0;
    virtual ~Primitive() = default;  // ‚Üê –ó–∞—á–µ–º —ç—Ç–æ?
};
–û—Ç–≤–µ—Ç: –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –Ω—É–∂–µ–Ω –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –ü–û–¢–û–ú–ö–û–í —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å:

cpp
Primitive* shape = new Circle(1, 2, 3);  // –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
delete shape;  // –ë–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –≤—ã–∑–æ–≤–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ ~Primitive()
               // ~Circle() –Ω–µ –≤—ã–∑–æ–≤–µ—Ç—Å—è ‚Üí —É—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
–ë–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:

text
delete shape ‚Üí ~Primitive() (—Ç–æ–ª—å–∫–æ)
–° –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º:

text
delete shape ‚Üí ~Circle() ‚Üí ~Shape() ‚Üí ~Primitive() (–≤—Å—è —Ü–µ–ø–æ—á–∫–∞)
2. –ú–æ–∂–Ω–æ –ª–∏ –∏–º–µ—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–º –∫–ª–∞—Å—Å–µ?

–î–∞! –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –º–æ–∂–µ—Ç –∏ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–µ—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≠–¢–û–ì–û –∫–ª–∞—Å—Å–∞, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –µ–≥–æ –∫–∞–∫ –±–∞–∑–æ–≤–æ–≥–æ.

3. –ü–æ—á–µ–º—É = default?

cpp
virtual ~Primitive() = default;
–≠—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π C++ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–∑–Ω–∞—á–∞–µ—Ç:

"–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –ø—É—Å—Ç–æ–º—É —Ç–µ–ª—É {}, –Ω–æ –±–æ–ª–µ–µ –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω–æ








7.


# üéØ **–ò—Ç–æ–≥–æ–≤—ã–π –≥–∏–¥ –ø–æ —É–º–Ω—ã–º —É–∫–∞–∑–∞—Ç–µ–ª—è–º –≤ C++**

## üìã **–ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞**

| –£–∫–∞–∑–∞—Ç–µ–ª—å | –í–ª–∞–¥–µ–Ω–∏–µ | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|-----------|----------|-------------|---------------|
| `unique_ptr` | –ï–¥–∏–Ω–æ–ª–∏—á–Ω–æ–µ | ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `shared_ptr` | –†–∞–∑–¥–µ–ª—è–µ–º–æ–µ | ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ | –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å |
| `weak_ptr` | –ë–µ–∑ –≤–ª–∞–¥–µ–Ω–∏—è | ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ | –ù–∞–±–ª—é–¥–µ–Ω–∏–µ, —Ä–∞–∑—Ä—ã–≤ —Ü–∏–∫–ª–æ–≤ |

---

## üöÄ **1. std::unique_ptr - –ï–¥–∏–Ω–æ–ª–∏—á–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü**

### **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```cpp
// ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
void process() {
    auto resource = std::make_unique<Resource>();
    // –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª–∏—Ç—Å—è
}

// ‚úÖ –ß–ª–µ–Ω—ã –∫–ª–∞—Å—Å–∞ (–∫–æ–º–ø–æ–∑–∏—Ü–∏—è)
class Document {
    std::unique_ptr<Model> model;
public:
    Document() : model(std::make_unique<Model>()) {}
};

// ‚úÖ –§–∞–±—Ä–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
std::unique_ptr<Shape> createShape(ShapeType type) {
    return std::make_unique<Circle>(); // –∏–ª–∏ Square, Triangle...
}

// ‚úÖ –ú–∞—Å—Å–∏–≤—ã
auto buffer = std::make_unique<int[]>(1024);
```

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üîí **–ù–µ–ª—å–∑—è –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å**, —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å (`std::move`)
- ‚ö° **–ù—É–ª–µ–≤—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã** (–∫–∞–∫ raw pointer)
- üóëÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ scope

---

## üîÑ **2. std::shared_ptr - –†–∞–∑–¥–µ–ª—è–µ–º–æ–µ –≤–ª–∞–¥–µ–Ω–∏–µ**

### **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```cpp
// ‚úÖ –ö—ç—à–∏, –æ–±—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã
class TextureCache {
    std::unordered_map<std::string, std::shared_ptr<Texture>> cache;
};

// ‚úÖ –ù–µ—Å–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω —Ä–µ—Å—É—Ä—Å
class Scene {
    std::vector<std::shared_ptr<Mesh>> meshes;
    std::shared_ptr<Camera> camera; // –º–Ω–æ–≥–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–∞–º–µ—Ä—É
};

// ‚úÖ –û–±—ä–µ–∫—Ç—ã —Å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
auto config = std::make_shared<Config>();
auto service1 = Service(config);
auto service2 = Service(config);
// config –∂–∏–≤–µ—Ç –ø–æ–∫–∞ –≤—Å–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç
```

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üìä **–°—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫** (reference counting)
- üë• **–ú–æ–∂–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å** - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫
- ‚ö†Ô∏è **–ù–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã** –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–æ–º
- üîÑ **–†–∏—Å–∫ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫**

---

## üëÄ **3. std::weak_ptr - –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –±–µ–∑ –≤–ª–∞–¥–µ–Ω–∏—è**

### **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```cpp
// ‚úÖ –ù–∞–±–ª—é–¥–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∂–∏–∑–Ω–∏
class Observer {
    std::weak_ptr<Subject> subject;

    void update() {
        if (auto subj = subject.lock()) { // –ø–æ–ª—É—á–∞–µ–º temporary shared_ptr
            subj->doSomething();
        }
        // –æ–±—ä–µ–∫—Ç –º–æ–≥ –±—ã—Ç—å —É–¥–∞–ª–µ–Ω - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
    }
};

// ‚úÖ –†–∞–∑—Ä—ã–≤ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
class Parent {
    std::vector<std::shared_ptr<Child>> children;
};

class Child {
    std::weak_ptr<Parent> parent; // weak_ptr –≤–º–µ—Å—Ç–æ shared_ptr!
};

// ‚úÖ –ö—ç—à–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π
class Cache {
    std::unordered_map<Key, std::weak_ptr<Resource>> cache;

    std::shared_ptr<Resource> get(Key key) {
        if (auto weak = cache[key]) {
            if (auto resource = weak.lock()) {
                return resource; // –æ–±—ä–µ–∫—Ç –µ—â–µ –∂–∏–≤
            }
        }
        // –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç
        auto resource = std::make_shared<Resource>();
        cache[key] = resource;
        return resource;
    }
};
```

### **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- üëÅÔ∏è **–¢–æ–ª—å–∫–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ**, –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∂–∏–∑–Ω—å
- üîÑ **–ù—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `.lock()`** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
- üõ°Ô∏è **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É—Ç–µ—á–∫–∏** –æ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫

---

## üéØ **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–µ—Ä–µ–≤–æ —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏**
```cpp
class TreeNode {
    std::unique_ptr<TreeNode> left, right; // –≤–ª–∞–¥–µ–µ–º –¥–µ—Ç—å–º–∏
    std::weak_ptr<TreeNode> parent;        // –Ω–∞–±–ª—é–¥–∞–µ–º –∑–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–º
};
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤**
```cpp
class ResourceManager {
    std::vector<std::shared_ptr<Texture>> loadedTextures;

public:
    std::shared_ptr<Texture> loadTexture(const std::string& path) {
        // –∏—â–µ–º –≤ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö
        for (auto& tex : loadedTextures) {
            if (tex->path == path) return tex;
        }
        // –∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—ã–π
        auto texture = std::make_shared<Texture>(path);
        loadedTextures.push_back(texture);
        return texture;
    }
};
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: Publisher-Subscriber**
```cpp
class Publisher {
    std::vector<std::weak_ptr<Subscriber>> subscribers;

public:
    void notify() {
        for (auto it = subscribers.begin(); it != subscribers.end(); ) {
            if (auto sub = it->lock()) {
                sub->update();
                ++it;
            } else {
                it = subscribers.erase(it); // —É–¥–∞–ª—è–µ–º –º–µ—Ä—Ç–≤—ã—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
            }
        }
    }
};
```

---

## ‚ö†Ô∏è **–ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å**

### **‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```cpp
// –°—ã—Ä—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ —Å –≤–ª–∞–¥–µ–Ω–∏–µ–º
MyClass* obj = new MyClass(); // –£–¢–ï–ß–ö–ê!

// –°–æ–∑–¥–∞–Ω–∏–µ shared_ptr —á–µ—Ä–µ–∑ new
std::shared_ptr<MyClass> p(new MyClass()); // –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö

// –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ —Å shared_ptr
class A { std::shared_ptr<B> b; };
class B { std::shared_ptr<A> a; }; // –£–¢–ï–ß–ö–ê –ü–ê–ú–Ø–¢–ò!
```

### **‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:**
```cpp
// –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ make_*
auto uptr = std::make_unique<MyClass>();
auto sptr = std::make_shared<MyClass>();

// weak_ptr –¥–ª—è —Ä–∞–∑—Ä—ã–≤–∞ —Ü–∏–∫–ª–æ–≤
class A { std::shared_ptr<B> b; };
class B { std::weak_ptr<A> a; }; // ‚úÖ –ë–µ–∑ —É—Ç–µ—á–µ–∫
```

---

## üèÜ **–ó–æ–ª–æ—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞**

1. **üîÑ –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å `unique_ptr`** - —ç—Ç–æ –≤–∞—à –≤—ã–±–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
2. **üë• –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `shared_ptr` —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –≤–ª–∞–¥–µ–Ω–∏–µ**
3. **üëÄ –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ `weak_ptr` –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∏ —Ä–∞–∑—Ä—ã–≤–∞ —Ü–∏–∫–ª–æ–≤**
4. **‚ö° –í—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ `make_unique`/`make_shared`**
5. **üö´ –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—ã—Ä—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–ª—è –≤–ª–∞–¥–µ–Ω–∏—è**

## üéØ **–ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ –≤—ã–±–æ—Ä–∞:**

```
–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü?    ‚Üí unique_ptr
–ù–µ—Å–∫–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤?     ‚Üí shared_ptr
–¢–æ–ª—å–∫–æ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ?         ‚Üí weak_ptr
```

–°–ª–µ–¥—É—è —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º, –≤—ã –∏–∑–±–µ–∂–∏—Ç–µ 99% –ø—Ä–æ–±–ª–µ–º —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç—å—é –≤ C++! üöÄ














8.
# üìö **C++ –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ - –ü–æ–ª–Ω—ã–π –≥–∞–π–¥ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö**

## üéØ **1. –ë–ê–ó–û–í–´–ï –ü–û–ù–Ø–¢–ò–Ø**

### **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã:**
```cpp
#include <fstream>  // –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
#include <iostream> // –¥–ª—è –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞
#include <string>   // –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏
```

### **–¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤:**
- `ifstream` - –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ (Input File Stream)
- `ofstream` - –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª (Output File Stream)
- `fstream` - –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ (File Stream)

---

## üéØ **2. –ó–ê–ü–ò–°–¨ –í –§–ê–ô–õ (ofstream)**

### **–ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:**
```cpp
#include <fstream>
#include <iostream>

int main() {
    // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª
    std::ofstream file("example.txt");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –æ—Ç–∫—Ä—ã–ª—Å—è –ª–∏ —Ñ–∞–π–ª
    if (!file.is_open()) {
        std::cout << "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞!" << std::endl;
        return 1;
    }

    // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª
    file << "Hello World!" << std::endl;
    file << "–≠—Ç–æ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞" << std::endl;
    file << "–ê —ç—Ç–æ –≤—Ç–æ—Ä–∞—è —Å—Ç—Ä–æ–∫–∞" << std::endl;
    file << "–ß–∏—Å–ª–æ: " << 42 << std::endl;

    // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª
    file.close();

    std::cout << "–î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ —Ñ–∞–π–ª!" << std::endl;
    return 0;
}
```

### **–†–µ–∂–∏–º—ã –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞:**
```cpp
std::ofstream file1("file.txt");                          // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
std::ofstream file2("file.txt", std::ios::app);           // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω–µ—Ü
std::ofstream file3("file.txt", std::ios::trunc);         // –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
std::ofstream file4("file.txt", std::ios::binary);        // –±–∏–Ω–∞—Ä–Ω—ã–π —Ä–µ–∂–∏–º
```

---

## üéØ **3. –ß–¢–ï–ù–ò–ï –ò–ó –§–ê–ô–õ–ê (ifstream)**

### **–ß—Ç–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ:**
```cpp
#include <fstream>
#include <iostream>
#include <string>

int main() {
    std::ifstream file("example.txt");

    if (!file.is_open()) {
        std::cout << "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞!" << std::endl;
        return 1;
    }

    std::string line;
    int lineNumber = 1;

    // –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
    while (std::getline(file, line)) {
        std::cout << "–°—Ç—Ä–æ–∫–∞ " << lineNumber << ": " << line << std::endl;
        lineNumber++;
    }

    file.close();
    return 0;
}
```

### **–ß—Ç–µ–Ω–∏–µ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞:**
```cpp
#include <fstream>
#include <iostream>

int main() {
    std::ifstream file("example.txt");

    if (!file.is_open()) {
        std::cout << "–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞!" << std::endl;
        return 1;
    }

    char ch;
    // –ß–∏—Ç–∞–µ–º –ø–æ –æ–¥–Ω–æ–º—É —Å–∏–º–≤–æ–ª—É
    while (file.get(ch)) {
        std::cout << ch;
    }

    file.close();
    return 0;
}
```

---

## üéØ **4. –ü–†–û–í–ï–†–ö–ò –ò –û–®–ò–ë–ö–ò**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∞–π–ª–∞:**
```cpp
#include <fstream>
#include <iostream>

int main() {
    std::ifstream file("example.txt");

    if (file.is_open()) {
        std::cout << "–§–∞–π–ª –æ—Ç–∫—Ä—ã—Ç —É—Å–ø–µ—à–Ω–æ!" << std::endl;
    } else {
        std::cout << "–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª!" << std::endl;
        return 1;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞
    if (file.eof()) {
        std::cout << "–î–æ—Å—Ç–∏–≥–Ω—É—Ç –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞" << std::endl;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏
    if (file.fail()) {
        std::cout << "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è" << std::endl;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä—å–µ–∑–Ω—ã–µ –æ—à–∏–±–∫–∏
    if (file.bad()) {
        std::cout << "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞!" << std::endl;
    }

    file.close();
    return 0;
}
```

---

## üéØ **5. –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ï –ü–†–ò–ú–ï–†–´ –î–õ–Ø –í–ê–®–ï–ì–û –ü–†–û–ï–ö–¢–ê**

### **–ü—Ä–∏–º–µ—Ä 1: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (–∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª)**
```cpp
#include <fstream>
#include <iostream>
#include <vector>

void exportToFile(const std::vector<std::string>& primitives, const std::string& filename) {
    std::ofstream file(filename);

    if (!file.is_open()) {
        std::cout << "–û—à–∏–±–∫–∞: –Ω–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª " << filename << std::endl;
        return;
    }

    // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π –ø—Ä–∏–º–∏—Ç–∏–≤ –≤ —Ñ–∞–π–ª
    for (const auto& primitive : primitives) {
        file << primitive << std::endl;
    }

    file.close();
    std::cout << "–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ " << filename << std::endl;
}
```

### **–ü—Ä–∏–º–µ—Ä 2: –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (—á—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞)**
```cpp
#include <fstream>
#include <iostream>
#include <vector>
#include <string>

std::vector<std::string> importFromFile(const std::string& filename) {
    std::vector<std::string> primitives;
    std::ifstream file(filename);

    if (!file.is_open()) {
        std::cout << "–û—à–∏–±–∫–∞: –Ω–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª " << filename << std::endl;
        return primitives; // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –≤–µ–∫—Ç–æ—Ä
    }

    std::string line;
    while (std::getline(file, line)) {
        if (!line.empty()) { // –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
            primitives.push_back(line);
        }
    }

    file.close();
    std::cout << "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ " << primitives.size() << " –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤" << std::endl;
    return primitives;
}
```

### **–ü—Ä–∏–º–µ—Ä 3: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è**
```cpp
#include <fstream>
#include <iostream>
#include <vector>
#include <string>

int main() {
    // –î–∞–Ω–Ω—ã–µ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ (–≤–∞—à–∏ –ø—Ä–∏–º–∏—Ç–∏–≤—ã)
    std::vector<std::string> shapes = {
        "CIRCLE 10 20 5",
        "RECTANGLE 30 40 100 50",
        "LINE 0 0 200 200"
    };

    // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤ —Ñ–∞–π–ª
    std::ofstream outFile("shapes.txt");
    for (const auto& shape : shapes) {
        outFile << shape << std::endl;
    }
    outFile.close();
    std::cout << "–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!" << std::endl;

    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–∑ —Ñ–∞–π–ª–∞
    std::ifstream inFile("shapes.txt");
    std::vector<std::string> importedShapes;
    std::string line;

    while (std::getline(inFile, line)) {
        importedShapes.push_back(line);
    }
    inFile.close();

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    std::cout << "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:" << std::endl;
    for (const auto& shape : importedShapes) {
        std::cout << shape << std::endl;
    }

    return 0;
}
```

---

## üéØ **6. –ß–¢–û –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –í –í–ê–®–ï–ú –ü–†–û–ï–ö–¢–ï**

### **–î–ª—è ExportImport.cpp:**
```cpp
#include "ExportImport.h"
#include <fstream>
#include <iostream>
#include <string>

void ExportImport::exportDocument(Document* doc, const std::string& filename) {
    std::ofstream file(filename);

    if (!file.is_open()) {
        std::cerr << "–û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: –Ω–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª " << filename << std::endl;
        return;
    }

    // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∞—à –∫–æ–¥ –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤
    file << "CIRCLE 20 30 6" << std::endl;
    file << "RECTANGLE 10 10 50 30" << std::endl;

    file.close();
    std::cout << "–î–æ–∫—É–º–µ–Ω—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ " << filename << std::endl;
}

Document* ExportImport::importDocument(const std::string& filename) {
    std::ifstream file(filename);
    auto newDoc = new Document();

    if (!file.is_open()) {
        std::cerr << "–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: –Ω–µ –º–æ–≥—É –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª " << filename << std::endl;
        return newDoc;
    }

    std::string line;
    while (std::getline(file, line)) {
        // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≤–∞—à –∫–æ–¥ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤
        std::cout << "–ß–∏—Ç–∞–µ–º: " << line << std::endl;
    }

    file.close();
    std::cout << "–î–æ–∫—É–º–µ–Ω—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ " << filename << std::endl;
    return newDoc;
}
```

---

## ‚ö†Ô∏è **–í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´:**

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ** –æ—Ç–∫—Ä—ã–ª—Å—è –ª–∏ —Ñ–∞–π–ª
2. **–ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ —Ñ–∞–π–ª—ã** –ø–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `std::getline()`** –¥–ª—è —á—Ç–µ–Ω–∏—è —Å—Ç—Ä–æ–∫
4. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏** - —Ñ–∞–π–ª –º–æ–∂–µ—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ! üöÄ
















9
–ß—Ç–æ —Ç–∞–∫–æ–µ dynamic_pointer_cast:

std::dynamic_pointer_cast<Circle>(primitive) –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å shared_ptr<Primitive> –≤ shared_ptr<Circle>
–ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ Circle
–ï—Å–ª–∏ —Ç–∏–ø –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç nullptr




